<div class="container">
  <h1>Panel de AdministraciÃ³n</h1>
  <button class="btn-primary" (click)="openCreateModal()">+ Nuevo Usuario</button>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of users">
        <td>{{ u.id }}</td>
        <td>{{ u.nombre }}</td>
        <td>{{ u.email }}</td>
        <td>
          <span [class]="'badge ' + u.rol">{{ u.rol }}</span>
        </td>
        <td>
          <button (click)="openEditModal(u)">âœï¸</button>
          <button (click)="deleteUser(u)">ğŸ—‘ï¸</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="modal-backdrop" *ngIf="isModalOpen">
    <div class="modal-content">
      <h2>{{ isNewUser ? 'Crear Usuario' : 'Editar Usuario' }}</h2>
      
      <form (ngSubmit)="saveUser()">
        <label>Nombre:</label>
        <input [(ngModel)]="selectedUser.nombre" name="nombre" required>

        <label>Email:</label>
        <input [(ngModel)]="selectedUser.email" name="email" required type="email">

        <label>ContraseÃ±a:</label>
        <input [(ngModel)]="selectedUser.password" name="password" type="password" 
               [placeholder]="isNewUser ? 'Requerida' : 'Dejar vacÃ­o para no cambiar'">

        <label>Rol:</label>
        <select [(ngModel)]="selectedUser.rol" name="rol">
          <option value="ADMIN">Administrador</option>
          <option value="PROGRAMADOR">Programador</option>
          <option value="CLIENTE">Cliente</option>
        </select>

        <div class="actions">
          <button type="button" (click)="closeModal()">Cancelar</button>
          <button type="submit" class="btn-save">Guardar</button>
        </div>
      </form>
    </div>
  </div>
</div>