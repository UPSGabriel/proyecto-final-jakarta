<div class="public-container">

  <nav class="top-nav" *ngIf="currentUser">
    <div class="nav-content">
      <span class="welcome-text">ğŸ‘‹ Hola, <strong>{{ currentUser.nombre }}</strong></span>
      <button class="btn-logout-minimal" (click)="logout()">
        ğŸšª Cerrar SesiÃ³n
      </button>
    </div>
  </nav>

  <header class="hero-section">
    <h1>ğŸš€ Portafolio de Programadores P67</h1>
    <p>Encuentra al experto que necesitas para tu prÃ³ximo proyecto.</p>

    <div class="hero-buttons">
      <button (click)="descargar()" class="btn-pdf">
        ğŸ“„ Descargar Reporte PDF
      </button>
    </div>
  </header>

  <div class="content-wrapper">
    <section class="programmers-section">
      <h2 class="section-title">Nuestros Expertos Disponibles</h2>

      <div *ngIf="programadores.length === 0" class="loading-state">
        <p>â³ Cargando talentos...</p>
      </div>

      <div class="grid-programadores">
        <div *ngFor="let p of programadores" class="card-dev">
          <div class="card-header">
            <div class="avatar">{{ p.nombre.charAt(0) }}</div>
            <div>
              <h3>{{ p.nombre }}</h3>
              <span class="badge">{{ p.rol }}</span>
            </div>
          </div>

          <div class="card-body">
            <p><strong>ğŸ“§ Email:</strong> {{ p.email }}</p>
            <p class="desc">
              {{ p.perfil?.descripcion || 'Experto en desarrollo Backend y Frontend con Jakarta EE.' }}
            </p>
            <p *ngIf="p.perfil?.especialidad" style="font-size: 0.85rem; color: #666; margin-top: 5px;">
              ğŸŒŸ {{ p.perfil?.especialidad }}
            </p>
            <div class="horarios-box" *ngIf="p.perfil?.horarios">
              <strong>ğŸ•’ Horarios Disponibles:</strong>
              <p>{{ p.perfil?.horarios }}</p>
            </div>
          </div>

          <div class="card-footer">
            <a *ngIf="p.perfil?.whatsapp"
               [href]="'https://wa.me/' + p.perfil!.whatsapp"
               target="_blank"
               class="btn-outline">
              ğŸ’¬ WhatsApp
            </a>
            <button class="btn-agendar" (click)="abrirModalAgendar(p)">
              ğŸ“… Agendar AsesorÃ­a
            </button>
          </div>
        </div>
      </div>
    </section>

    <hr class="divider">

    <section class="info-section">
      <h2 class="section-title">Â¿CÃ³mo funciona?</h2>
      <div class="steps-grid">
        <div class="step-card">
          <h3>1. Explora</h3>
          <p>Revisa el portafolio y los horarios de nuestros desarrolladores.</p>
        </div>
        <div class="step-card">
          <h3>2. Agenda</h3>
          <p>Solicita una asesorÃ­a tÃ©cnica. El programador recibirÃ¡ tu solicitud.</p>
        </div>
        <div class="step-card">
          <h3>3. Soluciona</h3>
          <p>Si aceptan tu solicitud, recibirÃ¡s un correo de confirmaciÃ³n.</p>
        </div>
      </div>
    </section>
  </div>

  <footer>
    <p>Â© 2025 Proyecto Final Jakarta EE & Angular - UPS</p>
  </footer>

</div>

<div class="modal-backdrop" *ngIf="isModalOpen">
  <div class="modal-content">
    <h3 style="color: #2575fc; margin-top: 0;">ğŸ“… Nueva Solicitud de AsesorÃ­a</h3>
    <p>Agendando con: <strong>{{ selectedProgrammer?.nombre }}</strong></p>
    <div class="alert-info" *ngIf="selectedProgrammer?.perfil?.horarios">
      <small>â„¹ï¸ Recuerda sus horarios: <strong>{{ selectedProgrammer?.perfil?.horarios }}</strong></small>
    </div>
    <form (ngSubmit)="confirmarCita()">
      <div class="form-group">
        <label>Tema de la AsesorÃ­a:</label>
        <input [(ngModel)]="newCita.tema" name="tema" required placeholder="Ej: Ayuda con Spring Boot" class="form-control">
      </div>
      <div class="form-group">
        <label>Fecha:</label>
        <input type="date" [(ngModel)]="newCita.fecha" name="fecha" required class="form-control">
      </div>
      <div class="form-group">
        <label>Hora:</label>
        <input type="time" [(ngModel)]="newCita.hora" name="hora" required class="form-control">
      </div>
      <div class="modal-actions">
        <button type="button" class="btn-cancel" (click)="cerrarModal()">Cancelar</button>
        <button type="submit" class="btn-confirm">Enviar Solicitud</button>
      </div>
    </form>
  </div>
</div>
